schema {
  query: Query
  mutation: Mutation
}

interface Node {
  id: ID
}

interface MutationResponse {
  code: String!
  success: Boolean!
  message: String!
}

type MenuItems implements Node {
  id: ID
  name: String!
  ingredients: String!
  calories: Int
  price: Float!
  caption: String!
  ratings: [Rating]
  category: String!
  images: [String]
  inStock: Boolean
}

type Friend implements Node {
  id: ID
  username: String!
}

type Combos implements Node {
  id: ID
  ratings: [Rating]
  title: String!
  menuItems: [MenuItems]
  price: Float!
}

type User implements Node {
  id: ID
  username: String!
  password: String!
  email: String!
  friends: [Friend]
  cart: Cart
}

type Rating implements Node {
  id: ID
  emoji: String
  ratingText: String
  user: User
  createdAt: String
  images: [String]
  menuItem: MenuItems
  ratedId: RatedObject
}

union RatedObject = MenuItems | Combos

type Auth {
  token: ID
  user: User
}

input CreateRatingInput {
  ratedId: ID
  emoji: String!
  ratingText: String
  images: [String]
  clientMutationId: String
}

type CreateRatingPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  rating: Rating

  clientMutationId: String
}
input DeleteRatingInput {
  id: ID
  name: String!
  clientMutationId: String
}

type DeleteRatingPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  rating: Rating
  clientMutationId: String
}

input RegisterInput {
  username: String!
  password: String!
  email: String!
  clientMutationId: String
}

type RegisterPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  token: ID
  user: User
  clientMutationId: String
}

input LoginInput {
  username: String!
  password: String!
  clientMutationId: String
}

type LoginPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  token: ID
  user: User
  clientMutationId: String
}

input CreateCombosInput {
  title: String!
  menuItems: [ID]!
  price: Float!
  clientMutationId: String
}

type CreateCombosPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  combos: Combos
  clientMutationId: String
}

input DeleteCombosInput {
  title: String!
  clientMutationId: String
}

type DeleteCombosPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  combos: Combos
  clientMutationId: String
}

input EditCombosInput {
  message: String
  title: String!
  menuItems: ID
  clientMutationId: String
}

type EditCombosPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  combos: Combos
  clientMutationId: String
}

input RemoveFromCombosInput {
  title: String!
  menuItems: ID
  clientMutationId: String
}

type RemoveFromCombosPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  combos: Combos
  clientMutationId: String
}

input CreateMenuItemInput {
  name: String!
  ingredients: String!
  calories: Int
  price: Float!
  category: String!
  clientMutationId: String
}

type CreateMenuItemPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  menuItem: MenuItems
  clientMutationId: String
}

input DeleteMenuItemInput {
  name: String!
  clientMutationId: String
}

type DeleteMenuItemPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  menuItem: MenuItems
  clientMutationId: String
}

input EditMenuItemInput {
  comboId: ID
  name: String!
  clientMutationId: String
}

type EditMenuItemPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  menuItem: MenuItems
  clientMutationId: String
}
input ToggleStockStatusInput {
  inStock: Boolean!
  clientMutationId: String
}

type Restaurant implements Node {
  id: ID
  name: String!
  menuItems: [MenuItems]
  combos: [Combos]
  ratings: [Rating]
  category: String!
  location: String!
  contactInfo: String!
  images: [String]
  hours: String
  owner: User! 
  activeOrders: [Order]
}

input CreateRestaurantInput {
  name: String!
  menuItems: [ID]
  combos: [ID]
  category: String!
  location: String!
  contactInfo: String!
  images: [String]
  hours: String
  clientMutationId: String
}
type CreateRestaurantPayload {
  code: String!
  success: Boolean!
  message: String!
  restaurant: Restaurant
}
input DeleteRestaurantInput {
  id: ID
  name: String!
  clientMutationId: String
}

type DeleteRestaurantPayload {
  code: String!
  success: Boolean!
  message: String!
  restaurant: Restaurant
  clientMutationId: String
}

input AddRestaurantInput {
  name: String!
  menuItems: [ID]
  combos: [ID]
  ratings: [ID]
  category: String!
  location: String!
  contactInfo: String!
  images: [String]
  hours: String

  clientMutationId: String
}

type AddRestaurantPayload {
  code: String!
  success: Boolean!
  message: String!
  restaurant: Restaurant
  clientMutationId: String
}

input EditRestaurantInput {
  id: ID
  name: String
  menuItems: [ID]
  combos: [ID]
  ratings: [ID]
  category: String
  location: String
  contactInfo: String
  images: [String]
  hours: String

  clientMutationId: String
}

type EditRestaurantPayload {
  code: String!
  success: Boolean!
  message: String!
  restaurant: Restaurant
  clientMutationId: String
}

type ToggleStockStatusPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  menuItem: MenuItems
  clientMutationId: String
}

type CartItem implements Node {
  id: ID
  menuItem: MenuItems
  combo: Combos
  quantity: Int
}

type Cart implements Node {
  id: ID
  items: [CartItem]
  totalPrice: Float
}
input AddToCartInput {
  id: ID!

  clientMutationId: String
}
type AddToCartPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  clientMutationId: String
}

input RemoveFromCartInput {
  id: [ID]
  clientMutationId: String
}
type RemoveFromCartPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  clientMutationId: String
}

enum OrderStatus {
  PENDING
  PREPARING
  READY
  COMPLETED
  CANCELLED
}

type Order implements Node {
  id: ID
  customer: User!
  restaurant: Restaurant!
  items: [OrderItem]!
  totalPrice: Float!
  status: OrderStatus!
  createdAt: String!
}

type OrderItem {
  name: String!    
  price: Float!    
  quantity: Int!
  itemReference: MenuItems 
}
input CheckoutInput {
  restaurantId: ID!
  clientMutationId: String
}

type CheckoutPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  order: Order
}

input UpdateOrderStatusInput {
  orderId: ID!
  status: OrderStatus!
  clientMutationId: String
}
input OrderItemInput {
  menuItemId: ID!
  quantity: Int!
}
type OrderItemPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  orderItem: Order
}
type UpdateOrderStatusPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  order: Order
}

type ClaimRestaurantOwnershipPayload implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  restaurant: Restaurant
  clientMutationId: String
}

input ClaimRestaurantOwnershipInput {
  id: ID
  name: String!
  clientMutationId: String
}

type Query {
  node(id: ID): Node
  me: User
  menuItems: [MenuItems]
  users: [User]
  combos: [Combos]
  ratings: [Rating]
  restaurants: [Restaurant]
  friends: [Friend]
  cart: Cart
  orders: [Order]
  myOrders:[Order]
}



type Mutation {
  register(input: RegisterInput!): RegisterPayload
  login(input: LoginInput!): LoginPayload
  createCombos(input: CreateCombosInput!): CreateCombosPayload
  deleteCombos(input: DeleteCombosInput!): DeleteCombosPayload
  editCombos(input: EditCombosInput!): EditCombosPayload
  createMenuItems(input: CreateMenuItemInput!): CreateMenuItemPayload
  deleteMenuItems(input: DeleteMenuItemInput!): DeleteMenuItemPayload
  editMenuItems(input: EditMenuItemInput!): EditMenuItemPayload
  createRating(input: CreateRatingInput!): CreateRatingPayload
  deleteRating(input: DeleteRatingInput!): DeleteRatingPayload
  toggleStockStatus(input: ToggleStockStatusInput!): ToggleStockStatusPayload
  createRestaurant(input: CreateRestaurantInput!): CreateRestaurantPayload
  editRestaurant(input: EditRestaurantInput!): EditRestaurantPayload
  deleteRestaurant(input: DeleteRestaurantInput!): DeleteRestaurantPayload
  addRestaurant(input: AddRestaurantInput!): AddRestaurantPayload
  addToCart(input: AddToCartInput!): AddToCartPayload
  removeFromCart(input: RemoveFromCartInput!): RemoveFromCartPayload
  checkout(input: CheckoutInput!): CheckoutPayload
  updateOrderStatus(input: UpdateOrderStatusInput!): UpdateOrderStatusPayload
  createOrder(Restaurant: ID!, items: [OrderItemInput]!): Order
  claimRestaurantOwnership(input: ClaimRestaurantOwnershipInput!): ClaimRestaurantOwnershipPayload
}
